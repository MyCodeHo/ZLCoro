# 项目路线图

## 愿景

ZLCoro 致力于成为生产就绪的高性能 C++20 协程框架，帮助开发者轻松高效地构建可扩展的异步应用。

## 当前状态

**版本**: 0.1.0 (Alpha)  
**状态**: 积极开发中  
**协议**: MIT

### 已完成

- ✅ 项目基础设施和构建系统
- ✅ 核心协程类型（Task<T>、Generator<T>）
- ✅ 基础文档和示例
- ✅ 测试框架搭建

### 进行中

- 🚧 工作窃取线程池调度器
- 🚧 基于 Epoll 的 I/O 调度器
- 🚧 异步 Socket 实现
- �� 完善单元测试

## 发布计划

### v0.2.0 - 核心调度器 (目标: 2026 Q1)

**目标**：稳定的工作窃取调度器实现

**功能**：
- [ ] 可配置工作线程数的 ThreadPoolScheduler
- [ ] 用于负载均衡的工作窃取队列
- [ ] 任务优先级支持
- [ ] CPU 亲和性配置
- [ ] 性能基准测试对比

**质量要求**：
- [ ] 代码覆盖率 >80%
- [ ] 无已知严重 bug
- [ ] 完善的调度器测试
- [ ] 性能回归测试

### v0.3.0 - 异步 I/O (目标: 2026 Q2)

**目标**：生产就绪的异步 I/O 子系统

**功能**：
- [ ] 基于 Epoll 的 IOScheduler
- [ ] AsyncSocket（TCP/UDP）
- [ ] 带池化的缓冲区管理
- [ ] 多 Reactor 支持的 EventLoop
- [ ] 定时器系统（毫秒精度）

**质量要求**：
- [ ] 10 万+ 连接压力测试
- [ ] 网络协议示例（HTTP、Redis）
- [ ] I/O 性能基准测试
- [ ] 内存泄漏检测

### v0.4.0 - 同步原语 (目标: 2026 Q3)

**目标**：完整的同步原语套件

**功能**：
- [ ] 协程版 Mutex
- [ ] 用于消息传递的 Channel<T>
- [ ] 用于协调多协程的 WaitGroup
- [ ] 用于资源限制的 Semaphore
- [ ] 条件变量

**质量要求**：
- [ ] 测试中的死锁检测
- [ ] 并发压力测试
- [ ] 与 std::mutex 的性能对比
- [ ] 常见模式的示例

### v0.5.0 - 性能优化 (目标: 2026 Q4)

**目标**：生产级性能和稳定性

**功能**：
- [ ] 协程帧对象池
- [ ] 内存分配池
- [ ] 适用场景的零拷贝 I/O
- [ ] NUMA 感知调度（可选）
- [ ] 完善的性能分析工具

**质量要求**：
- [ ] 所有基准测试达到目标指标
- [ ] 内存使用优化
- [ ] CPU 使用优化
- [ ] 广泛的实际场景测试

### v1.0.0 - 生产版本 (目标: 2027 Q1)

**目标**：稳定的生产就绪框架

**要求**：
- [ ] 所有核心功能完成
- [ ] 代码覆盖率 >90%
- [ ] 无已知严重/高优先级 bug
- [ ] 完整的 API 文档
- [ ] 从其他框架的迁移指南
- [ ] 生产案例研究

**特性**：
- [ ] 稳定的 API（语义化版本控制）
- [ ] 性能保证
- [ ] 长期支持承诺
- [ ] 企业级支持选项

## 未来增强（1.0 后）

### 高级 I/O

- [ ] Linux 5.1+ 的 io_uring 支持
- [ ] 高性能网络的 RDMA 支持
- [ ] TLS/SSL 集成
- [ ] HTTP/2 和 HTTP/3 支持

### 分布式系统

- [ ] gRPC 集成
- [ ] 服务网格支持
- [ ] 分布式追踪
- [ ] 熔断器模式

### 可观测性

- [ ] Prometheus 指标导出
- [ ] 结构化日志
- [ ] 分布式追踪（OpenTelemetry）
- [ ] 性能分析器集成

### 平台支持

- [ ] macOS 支持（kqueue）
- [ ] Windows 支持（IOCP）
- [ ] FreeBSD 支持
- [ ] 跨平台抽象

## 开发优先级

### 优先级 1：正确性

- 各层级严格测试
- 适用场景的形式化验证
- 内存安全（AddressSanitizer、ThreadSanitizer）
- 广泛的代码审查

### 优先级 2：性能

- 达到或超越行业基准
- 持续性能监控
- 基于分析的优化
- 回归测试

### 优先级 3：易用性

- 清晰直观的 API
- 完善的文档
- 有帮助的错误信息
- 丰富的示例集

### 优先级 4：兼容性

- 标准合规（C++20）
- 与现有代码的互操作性
- 从其他框架的迁移路径
- 跨版本稳定的 API

## 贡献方向

欢迎在以下方面贡献：

### 高优先级

- **核心实现**：调度器、I/O、同步原语
- **测试**：单元测试、集成测试、基准测试
- **文档**：API 文档、教程、示例
- **Bug 修复**：Issue 分类和解决

### 中优先级

- **性能**：性能分析和优化
- **示例**：实际应用场景
- **工具**：开发和调试工具
- **基准测试**：对比分析

### 低优先级

- **平台移植**：macOS、Windows 支持
- **语言绑定**：Python、Rust FFI
- **第三方集成**：第三方库支持

## 成功指标

### 性能目标

| 指标 | 目标 | 状态 |
|------|------|------|
| 协程切换 | <50ns | ⏳ 进行中 |
| 任务创建 | <100ns | ✅ 已达成 |
| 并发协程数 | 100万+ | ⏳ 测试中 |
| I/O QPS | 100万+ | ⏳ 进行中 |

### 质量目标

| 指标 | 目标 | 状态 |
|------|------|------|
| 代码覆盖率 | >85% | ⏳ 45% |
| 文档覆盖率 | 100% | ⏳ 60% |
| 严重 bug | 0 | ✅ 0 |
| 性能回归 | 0 | ✅ 0 |

## 长期愿景

### 第一年（2026）

- 将 ZLCoro 打造为现有框架的可行替代方案
- 建立贡献者和用户社区
- 达到生产就绪状态

### 第二年（2027）

- 扩展 Linux 以外的平台支持
- 与主流云服务商集成
- 发展扩展和工具生态系统

### 第三年+（2028+）

- 成为 C++ 异步编程的行业标准
- 大规模生产部署
- 活跃的研究和创新

## 风险缓解

### 技术风险

- **C++20 采用率**：通过回退实现缓解
- **性能问题**：持续基准测试和优化
- **API 稳定性**：1.0 前的仔细设计和广泛测试

### 项目风险

- **维护者可用性**：建立贡献者基础
- **竞争框架**：通过性能和易用性差异化
- **平台碎片化**：先聚焦 Linux，策略性扩展

## 参与项目

- **代码**：提交功能或修复的 PR
- **测试**：报告 bug 和性能问题
- **文档**：改进文档和添加示例
- **社区**：回答问题并帮助他人

详见 [CONTRIBUTING.md](CONTRIBUTING.md)。

---

**最后更新**：2025-11-07  
**下次审查**：2026-01-01

关于路线图的问题，请在 GitHub 上开启讨论。
